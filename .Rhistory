blogdown::config_netlify()
blogdown::check_netlify()
blogdown::check_netlify()
blogdown::config_netlify()
blogdown::check_netlify()
blogdown::check_gitignore()
blogdown::check_gitignore()
blogdown::check_gitignore()
blogdown::serve_site()
?blogdown::serve_site()
blogdown::serve_site(.site_dir ='~config/_default/')
?blogdown
blogdown::config_Rprofile()
serve_site()
blogdown::serve_site()
library(fs)
file_move(path = "config/_default/config.yaml", new_path = "config.yaml")
blogdown::serve_site
blogdown::serve_site()
blogdown::check_gitignore()
blogdown::check_content()
blogdown::config_netlify()
check_hugo()
blogdown::check_hugo()
blogdown::check_netlify(
)
blogdown::check_config()
blogdown::check_config()
blogdown::check_site()
blogdown::edit_draft(c(
"content/docs/svi/takeaways.md"
))
blogdown::check_site()
blogdown::new_post(title = "SVI",
ext = '.Rmarkdown',
subdir = "docs")
knitr::opts_chunk$set(echo = TRUE,message=F,warning = F,cache = F)
if (!require(pacman)) {install.packages("pacman"); library(pacman)}
p_load(tidyverse, tidycensus, tigris, kableExtra )
# mapview, crsuggest,
# remotes::install_github("walkerke/crsuggest")
# remotes::install_github("walkerke/tidycensus")
# devtools::install_github('walkerke/tigris')
options(tigris_use_cache = TRUE)
rappdirs::user_cache_dir('tigris')
# View(vars)
str(vars)
vars <- load_variables(2019, "acs5")
# View(vars)
str(vars)
blogdown::check_site()
file.remove(c(
"content/courses/f17.html"
))
blogdown::build_site(build_rmd = "f17")
blogdown::build_site(build_rmd = "f17.Rmd")
blogdown::build_site(build_rmd = "courses/f17.Rmd")
blogdown::build_site(build_rmd = "/courses/f17.Rmd")
blogdown::build_site(build_rmd = "content/courses/f17.Rmd")
blogdown::build_site(build_rmd = "content/courses/f17.Rmd")
blogdown::build_site(build_rmd = "content/courses/f17.Rmd")
blogdown::build_site(build_rmd = "content/courses/f17.Rmd")
blogdown::build_site(build_rmd = "content/acs/f17.Rmd")
blogdown::build_site(build_rmd = "content/acs/tdp.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/tdp.Rmd")
blogdown::check_site()
blogdown::build_site(build_rmd = "content/acs/tdp.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/f17.Rmd")
blogdown::build_site(build_rmd = "content/acs/f17.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/tdp.Rmarkdown")
gc()
gc()
knitr::opts_chunk$set(echo = TRUE,message=F,warning = F,cache = T)
if (!require(pacman)) {install.packages("pacman"); library(pacman)}
p_load(tidyverse, tidycensus, tigris, mapview, kableExtra )
# crsuggest,
# remotes::install_github("walkerke/crsuggest")
# remotes::install_github("walkerke/tidycensus")
# devtools::install_github('walkerke/tigris')
options(tigris_use_cache = TRUE)
rappdirs::user_cache_dir('tigris')
vars <- load_variables(2019, "acs5")
View(vars)
vars %>% filter(name %in% c(paste0("B08014_00", 2:9),paste0("B08141_00", 2:9))) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
vars %>% filter(name %in% c(paste0("B08014_00", 2:9),paste0("B08141_00", 2:9))) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
vars %>% filter(name %in% c(paste0("B08201_00", 2:9),paste0("B08203_00", 2:9))) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
(noveh2 <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B08201_002","B08203_002"), output = "wide", # same to "B08141_002"
summary_var = "B08201_001", cache_table = T
) %>%
mutate(noveh.per= 100 * B08201_002E / summary_est) %>%
select(GEOID,B08201_002E, summary_est, noveh.per)) %>% head()
# pdx_md<- metro_divisions(year=2019)  no protland #CBSAFP=="38900", CSAFP=="440", NAME %in% grepl("Portland", NAME)
# ua <-  urban_areas(year=2019)
# tri_cou <- c(Multnomah = "41051", Washington = "41067", Clackamas = "41005") #, Yamhill = "41071" , Clark = "53011"
tri_cou <- c('051','067','005')# "Multnomah", "Washington", "Clackamas"
(noveh2 <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B08201_002","B08203_002"), output = "wide", # same to "B08141_002"
summary_var = "B08201_001", cache_table = T
) %>%
mutate(noveh.per= 100 * B08201_002E / summary_est) %>%
select(GEOID,B08201_002E, summary_est, noveh.per)) %>% head()
(noveh2 <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B08201_002","B08203_002"), output = "wide", # same to "B08141_002"
summary_var = "B08201_001", cache_table = T
) %>%
mutate(noveh.per= 100 * B08201_002E / summary_est) %>%
select(GEOID,B08201_002E, B08203_002E, summary_est, noveh.per)) %>% head()
(noveh1 <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B08014_002","B08141_002"), output = "wide",
summary_var = "B08014_001", cache_table = T
) %>%
mutate(noveh.per= 100 * B08014_002E / summary_est) %>%
select(GEOID,B08014_002E, B08141_002E,summary_est, noveh.per)) %>% head()
blogdown::build_site(build_rmd = "content/acs/tdp.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/f17.Rmarkdown")
gc()
gc()
blogdown::build_site(build_rmd = "content/acs/tdp.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/f17.Rmarkdown")
knitr::opts_chunk$set(echo = TRUE,message=F,warning = F,cache = T)
if (!require(pacman)) {install.packages("pacman"); library(pacman)}
p_load(tidyverse, tidycensus, tigris, mapview, kableExtra )
# crsuggest,
# remotes::install_github("walkerke/crsuggest")
# remotes::install_github("walkerke/tidycensus")
# devtools::install_github('walkerke/tigris')
options(tigris_use_cache = TRUE)
rappdirs::user_cache_dir('tigris')
vars <- load_variables(2019, "acs5")
# View(vars)
str(vars)
length(unique(vars$concept))
blogdown::build_site(build_rmd = "content/acs/tdp.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/tdp.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/f17.Rmarkdown")
gc()
gc()
gc()
knitr::opts_chunk$set(echo = TRUE,message=F,warning = F,cache = T)
if (!require(pacman)) {install.packages("pacman"); library(pacman)}
p_load(tidyverse, tidycensus, tigris, kableExtra )
# mapview, crsuggest,
# remotes::install_github("walkerke/crsuggest")
# remotes::install_github("walkerke/tidycensus")
# devtools::install_github('walkerke/tigris')
options(tigris_use_cache = TRUE)
rappdirs::user_cache_dir('tigris')
vars <- load_variables(2019, "acs5")
View(vars)
(g16.tran_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B08301_010","C24010_001"),
summary_var = "B23025_004" , cache_table = T
)) %>% head()
tri_cou <- c('051','067','005')# "Multnomah", "Washington", "Clackamas"
(g16.tran_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B08301_010","C24010_001"),
summary_var = "B23025_004" , cache_table = T
)) %>% head()
(g16.tran_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B08301_010","C24010_001"),output = "wide",
summary_var = "B23025_004" , cache_table = T
)) %>% head()
dis_vars <- c("C18130_003","C18130_010","C18130_017")
vars %>% filter(name %in% dis_vars) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), font_size = 7)
(dis_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = dis_vars,
summary_var = "C18130_001" , cache_table = T
)) %>% head()
(dis_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = dis_vars, output = 'wide',
summary_var = "C18130_001" , cache_table = T
)) %>% head()
vars %>% filter(name %in% dis_vars)
(pov_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B17001_002","B17001_002","B17020_002","C17002_002","C17002_003"), output = "wide",
summary_var = "B17020_001" , cache_table = T
)) %>% head()
pov_vars <- c("B17020_001", "B17020_002",
"B17001_002","B17001_002",
"C17002_001","C17002_002","C17002_003")
vars %>% filter(name %in% pov_vars) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), font_size = 7)
pov_vars <- c("B17020_001", "B17020_002",
"B17001_002","B17001_002",
"C17002_001","C17002_002","C17002_003")
vars %>% filter(name %in% pov_vars)
pov_vars <- c("B17020_001", "B17020_002",
"B17001_001","B17001_002",
"C17002_001","C17002_002","C17002_003")
vars %>% filter(name %in% pov_vars) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), font_size = 7)
pov_vars <- c("B17020_001", "B17020_002",
"B17001_001","B17001_002",
"C17002_001","C17002_002","C17002_003")
vars %>% filter(name %in% pov_vars)
(pov_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B17001_001","B17001_002","B17020_002","C17002_002","C17002_003"), output = "wide",
summary_var = "B17020_001" , cache_table = T
)) %>% head()
(pov_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B17001_002"),
summary_var = "B17001_001" , cache_table = T
)) %>% head()
(pov_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B17001_002","B17020_002","C17002_002","C17002_003"), output = "wide",
summary_var = "B17001_001" , cache_table = T
)) %>% head()
(pov_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = "B17001_002", # c("B17020_002","C17002_002","C17002_003"), output = "wide",
summary_var = "B17001_001" , cache_table = T
)) %>% head()
(pov_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = "B17020_002", # c("B17020_002","C17002_002","C17002_003"), output = "wide",
summary_var = "B17020_001" , cache_table = T
)) %>% head()
vars %>% filter(grepl("B16001_",name),grepl("Speak English less than \"very well\"",label))
vars %>% filter(grepl("B16001_",name),grepl("Speak English less than \"very well\"",label)) %>% select(name)
g5.nonE_vars <- vars %>% filter(grepl("B16001_",name),grepl("Speak English less than \"very well\"",label)) %>% select(name)
vars %>% filter(name %in% g5.nonE_vars)
g5.nonE_vars <- (vars %>% filter(grepl("B16001_",name),grepl("Speak English less than \"very well\"",label)))$name
vars %>% filter(name %in% g5.nonE_vars)
g5.nonE_vars <- (vars %>% filter(grepl("B16008_",name),grepl("Speak English less than \"very well\"",label)))$name
vars %>% filter(name %in% g5.nonE_vars) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), font_size = 7)
vars %>% filter(name %in% g5.nonE_vars)
g5.nonE_vars <- (vars %>% filter(grepl("C16001_",name),grepl("Speak English less than \"very well\"",label)))$name
vars %>% filter(name %in% g5.nonE_vars)
g5.nonE_vars <- (vars %>% filter(grepl("B16008_",name),grepl("Speak English less than \"very well\"",label)))$name
vars %>% filter(name %in% g5.nonE_vars)
(g5.nonE_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = g5.nonE_vars, output = "wide",
summary_var = "C16001_001" , cache_table = T
)) %>% head()
g5.nonE_tract %>%
summarise(across(everything(), ~ sum(., is.na(.), 0)))
g5.nonE_tract
g5.nonE_vars
paste0(g5.nonE_vars,"E")
g5.nonE_tract %>%
summarise(across(where(paste0(g5.nonE_vars,"E")), ~ sum(., is.na(.), 0)))
g5.nonE_tract %>%
summarise(across(paste0(g5.nonE_vars,"E"), ~ sum(., is.na(.), 0)))
g5.nonE_tract %>%
summarise(across(paste0(g5.nonE_vars,"E"), ~ sum(., is.na(.), 0)))
summarise(across(paste0(g5.nonE_vars,"E"), sum)
g5.nonE_tract %>%
summarise(across(paste0(g5.nonE_vars,"E"), sum))
g5.nonE_tract
g5.nonE_tract %>%
mutate_at(vars(x, end_with("E")),sum, na.rm = TRUE)
g5.nonE_tract %>%
mutate_at(vars(x, ends_with("E")),sum, na.rm = TRUE)
g5.nonE_tract %>%
mutate_at(vars(x, ends_with("E")),sum, na.rm = TRUE)
g5.nonE_tract %>% mutate(across(c(x, ends_with("E")), mean, na.rm = TRUE))
g5.nonE_tract %>% mutate(across(ends_with("E"), mean, na.rm = TRUE))
g5.nonE_tract %>% mutate(across(ends_with("E"), sum, na.rm = TRUE))
g5.nonE_tract %>% mutate(across(ends_with("E"), sum))
g5.nonE_tract %>% mutate(across(ends_with("E"), mean, na.rm = TRUE))
g5.nonE_tract %>%
mutate_at( ends_with("E"),sum, na.rm = TRUE)
g5.nonE_tract %>% summarise(across(ends_with("E"), sum))
g5.nonE_tract %>% mutate(x=across(ends_with("E"), sum))
g5.nonE_tract%>% mutate(nonE= sum(across(ends_with("E")), na.rm = T))
g5.nonE_tract
g5.nonE_tract%>% mutate(nonE= sum(across(starts_with("B")&ends_with("E")), na.rm = T))
g5.nonE_tract%>% mutate(nonE= sum(var(starts_with("B")&ends_with("E")), na.rm = T))
g5.nonE_tract%>% mutate(nonE= sum(across(starts_with("B")&ends_with("E")), na.rm = T))
g5.nonE_tract%>% mutate(nonE= sum(where(starts_with("B")&ends_with("E")), na.rm = T))
g5.nonE_tract%>% mutate(nonE= sum(c(starts_with("B")&ends_with("E")), na.rm = T))
g5.nonE_tract%>% mutate(nonE= sum(paste0(g5.nonE_vars,"E"), na.rm = T))
paste0(g5.nonE_vars,"E")
g5.nonE_tract%>% mutate(nonE= sum(c(paste0(g5.nonE_vars,"E")), na.rm = T))
vector(paste0(g5.nonE_vars,"E"))
Vectorize(paste0(g5.nonE_vars,"E"))
factor(paste0(g5.nonE_vars,"E"))
g5.nonE_tract%>% mutate(nonE= sum(factor(paste0(g5.nonE_vars,"E")), na.rm = T))
paste0(g5.nonE_vars,"E")
g5.nonE_tract%>% mutate(nonE= sum(c("B16008_007E" "B16008_010E"), na.rm = T))
g5.nonE_tract%>% mutate(nonE= sum(c("B16008_007E", "B16008_010E"), na.rm = T))
g5.nonE_tract%>% mutate(nonE= sum(c(B16008_007E, B16008_010E), na.rm = T))
g5.nonE_tract[,paste0(g5.nonE_vars,"E")]
colSums(g5.nonE_tract[,paste0(g5.nonE_vars,"E")])
rowSums(g5.nonE_tract[,paste0(g5.nonE_vars,"E")])
g5.nonE_tract%>% mutate(nonE= rowSums(paste0(g5.nonE_vars,"E"), na.rm = T))
g5.nonE_tract%>% mutate(nonE= colSums(paste0(g5.nonE_vars,"E"), na.rm = T))
g5.nonE_tract%>% mutate(nonE=sum(paste0(g5.nonE_vars,"E"), na.rm = T))
g5.nonE_tract %>% mutate(Score = rowMeans(across(paste0(g5.nonE_vars,"E")), na.rm = TRUE))
g5.nonE_tract %>% mutate(Score = rowSums(across(paste0(g5.nonE_vars,"E")), na.rm = TRUE))
rowSums(g5.nonE_tract[,paste0(g5.nonE_vars,"E")])
g5.nonE_tract %>% mutate(Score = rowSums(across(paste0(g5.nonE_vars,"E")), na.rm = TRUE))
(g5.nonE_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = g5.nonE_vars, output = "wide",
summary_var = "C16001_001" , cache_table = T
))  %>% mutate(Score = rowSums(across(paste0(g5.nonE_vars,"E")), na.rm = TRUE)) %>% # rowSums(g5.nonE_tract[,paste0(g5.nonE_vars,"E")])
select(-starts_with("B"))
blogdown::build_site(build_rmd = "content/acs/f17.Rmarkdown")
blogdown::build_site(build_rmd = "content/acs/f17.Rmarkdown")
(g5.nonE_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = g5.nonE_vars, output = "wide",
summary_var = "C16001_001" , cache_table = T
))  %>% mutate(Sum = rowSums(across(paste0(g5.nonE_vars,"E")), na.rm = TRUE)) %>% # rowSums(g5.nonE_tract[,paste0(g5.nonE_vars,"E")])
select(-starts_with("B")) %>% head() # c(starts_with("B")&ends_with("E")
# https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-colwise/
# https://github.com/tidyverse/dplyr/issues/4544
(nonE_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B06007_005","B06007_008"), output = "wide",
summary_var = "B06007_001" , cache_table = T
)) %>% mutate(Sum = B06007_005E+B06007_008E) %>%
head()
g5.nonE_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = g5.nonE_vars, output = "wide",
summary_var = "C16001_001" , cache_table = T
)
g5.nonE_tract%>% mutate(Sum = rowSums(across(paste0(g5.nonE_vars,"E")), na.rm = TRUE)) %>% # rowSums(g5.nonE_tract[,paste0(g5.nonE_vars,"E")])
dplyr::select(-starts_with("B")) %>% head() # c(starts_with("B")&ends_with("E")
# https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-colwise/
# https://github.com/tidyverse/dplyr/issues/4544
g5.nonE_vars
# g5.nonE_vars <- (vars %>% filter(grepl("B16001_",name),grepl("Speak English less than \"very well\"",label)))$name
# g5.nonE_vars <- (vars %>% filter(grepl("B16008_",name),grepl("Speak English less than \"very well\"",label)))$name
g5.nonE_vars <- (vars %>% filter(grepl("C16001_",name),grepl("Speak English less than \"very well\"",label)))$name
vars %>% filter(name %in% g5.nonE_vars) %>% kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), font_size = 7)
g5.nonE_tract <- get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = g5.nonE_vars, output = "wide",
summary_var = "C16001_001" , cache_table = T
)
g5.nonE_tract%>% mutate(Sum = rowSums(across(paste0(g5.nonE_vars,"E")), na.rm = TRUE)) %>% # rowSums(g5.nonE_tract[,paste0(g5.nonE_vars,"E")])
dplyr::select(-starts_with("C")) %>% head() # c(starts_with("B")&ends_with("E")
# https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-colwise/
# https://github.com/tidyverse/dplyr/issues/4544
knitr::opts_chunk$set(echo = TRUE,message=F,warning = F,cache = F)
if (!require(pacman)) {install.packages("pacman"); library(pacman)}
p_load(tidyverse, tidycensus, tigris, mapview, kableExtra )
# crsuggest,
# remotes::install_github("walkerke/crsuggest")
# remotes::install_github("walkerke/tidycensus")
# devtools::install_github('walkerke/tigris')
options(tigris_use_cache = TRUE)
rappdirs::user_cache_dir('tigris')
get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B25044_003","B25044_010"), output = "wide",
summary_var = "B25044_001", cache_table = T
)
get_acs(
state = "41",
county = tri_cou,
geography = "tract",
variables = c("B25044_003","B25044_010"), output = "wide",
summary_var = "B25044_001", cache_table = T
) %>%
mutate(noveh.per= 100 * (B25044_003E + B25044_010E)/summary_est) %>%
select(GEOID,B25044_003E,B25044_010E,summary_est,noveh.per) %>% head()
remotes::install_github("rstudio/blogdown")
library(blogdown)
new_site(theme = "wowchemy/starter-hugo-project-documentation")
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
knitr::opts_chunk$set(echo = TRUE,message=F,warning = F,cache = F)
if (!require(pacman)) {install.packages("pacman"); library(pacman)}
p_load(tidyverse, tidycensus, tigris, mapview, kableExtra )
# crsuggest,
# remotes::install_github("walkerke/crsuggest")
# remotes::install_github("walkerke/tidycensus")
# devtools::install_github('walkerke/tigris')
options(tigris_use_cache = TRUE)
rappdirs::user_cache_dir('tigris')
blogdown::check_gitignore()
blogdown::check_gitignore()
blogdown::check_gitignore()
blogdown::check_content()
blogdown::build_site()
blogdown::serve_site()
blogdown::stop_server()
blogdown::config_netlify()
check_hugo()
blogdown::check_hugo()
blogdown::check_netlify()
blogdown::stop_server()
blogdown::build_site(build_rmd = TRUE)
blogdown::check_content()
